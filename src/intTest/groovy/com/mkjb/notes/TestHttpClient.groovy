package com.mkjb.notes

import com.mkjb.notes.adapters.mongo.NoteDocument
import io.micronaut.http.HttpHeaders
import io.micronaut.http.annotation.Get
import io.micronaut.http.annotation.Header
import io.micronaut.http.client.annotation.Client
import reactor.core.publisher.Flux
import reactor.core.publisher.Mono

@Client('/notes')
@Header(name = HttpHeaders.AUTHORIZATION, value = 'Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImNhMDA2MjBjNWFhN2JlOGNkMDNhNmYzYzY4NDA2ZTQ1ZTkzYjNjYWIiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJhenAiOiI2NjE4MTc2MzUwODctNGpkc2JkZHZmdDYza2dwdHJzNTZzcDhpZWVyZGRncDkuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQiOiI2NjE4MTc2MzUwODctNGpkc2JkZHZmdDYza2dwdHJzNTZzcDhpZWVyZGRncDkuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzdWIiOiIxMDAwNjEyODM3MzgwMjE3NjI4ODEiLCJoZCI6ImVtcG9yaXguY29tIiwiZW1haWwiOiJrLm11Y2hhQGVtcG9yaXguY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImF0X2hhc2giOiJqdEw3N2F5c05UMkYwcE9lclJpMWJRIiwibm9uY2UiOiJiY2QyM2Q3Yy1jYjFhLTQwODAtOGZkYi0zODM0ZGIwZjg4MjYiLCJuYW1lIjoiS3J6eXN6dG9mIE11Y2hhIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FBVFhBSnlrTWU2aWxPOEdDYThHbXRWTW1ONUJ1V0RaQm16UEkwOG5RTG50PXM5Ni1jIiwiZ2l2ZW5fbmFtZSI6IktyenlzenRvZiIsImZhbWlseV9uYW1lIjoiTXVjaGEiLCJsb2NhbGUiOiJlbiIsImlhdCI6MTY0MjMzODgxMCwiZXhwIjoxNjQyMzQyNDEwfQ.mw_bL5PDV8J1LsDxEqiOG-zE55L2X5rHEwght7SVvSFKWRC6SByIpm538O5G9c0DzRG_fhq7sv9KRC6X4UPG_qSZMyDY6JlCbLi61J1RiLqBL5qnQ0FN-Mya44L8yXtIKAzaSAWU7HGSvVBLILM9ziwLqMfXDwXsZMNtRQkIJNt45lS-HAuE6Uygjyhu3t4bEdxVI14p5qL-0Kt_GdXTt9uGrwzmphv-cshzcZJjtjZGDAv5D0QwNCjUEp6R0kj3hgIhbiXXtiqYof5YkLTJWymg5qEnVz8sD7Q6s5Gd-euI_R52fNlRG68QpFCRkscsqw9JRu9NKK5NxU0cTjSAoA')
interface TestHttpClient {

    @Get
    Flux<NoteDocument> getNotes();

    @Get("/{noteId}")
    Mono<NoteDocument> getNote(String noteId);
}